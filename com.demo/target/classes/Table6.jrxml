<?xml version="1.0" encoding="UTF-8"?>

<jasperReport 
    xmlns="http://jasperreports.sourceforge.net/jasperreports"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
    http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
    name="StudentCrosstab"
    pageWidth="595"
    pageHeight="842"
    columnWidth="555"
    leftMargin="20"
    rightMargin="20"
    topMargin="20"
    bottomMargin="20">

    <!-- Fields -->
    <field name="studentName" class="java.lang.String"/>
    <field name="course" class="java.lang.String"/>
    <field name="fee" class="java.lang.Double"/>

    <!-- Title -->
    <title>
        <band height="50">
            <staticText>
                <reportElement x="0" y="10" width="555" height="30"/>
                <textElement textAlignment="Center">
                    <font size="16" isBold="true"/>
                </textElement>
                <text><![CDATA[Student Course Fee Crosstab Report]]></text>
            </staticText>
        </band>
    </title>

    <!-- Summary Section -->
    <summary>
        <band height="300">

            <crosstab>
                <reportElement x="0" y="0" width="555" height="250"/>

                <!-- ROW GROUP -->
                <rowGroup name="studentName" width="150" totalPosition="End">
                    <bucket class="java.lang.String">
                        <bucketExpression><![CDATA[$F{studentName}]]></bucketExpression>
                    </bucket>

                    <crosstabRowHeader>
                        <cellContents>
                            <textField>
                                <reportElement x="0" y="0" width="150" height="20"/>
                                <textFieldExpression><![CDATA[$V{studentName}]]></textFieldExpression>
                            </textField>
                        </cellContents>
                    </crosstabRowHeader>

                    <crosstabTotalRowHeader>
                        <cellContents>
                            <staticText>
                                <reportElement x="0" y="0" width="150" height="20"/>
                                <text><![CDATA[Total]]></text>
                            </staticText>
                        </cellContents>
                    </crosstabTotalRowHeader>
                </rowGroup>

                <!-- COLUMN GROUP -->
                <columnGroup name="course" height="20" totalPosition="End">
                    <bucket class="java.lang.String">
                        <bucketExpression><![CDATA[$F{course}]]></bucketExpression>
                    </bucket>

                    <crosstabColumnHeader>
                        <cellContents>
                            <textField>
                                <reportElement x="0" y="0" width="100" height="20"/>
                                <textFieldExpression><![CDATA[$V{course}]]></textFieldExpression>
                            </textField>
                        </cellContents>
                    </crosstabColumnHeader>

                    <crosstabTotalColumnHeader>
                        <cellContents>
                            <staticText>
                                <reportElement x="0" y="0" width="100" height="20"/>
                                <text><![CDATA[Total]]></text>
                            </staticText>
                        </cellContents>
                    </crosstabTotalColumnHeader>
                </columnGroup>

                <!-- MEASURE -->
                <measure name="feeMeasure" class="java.lang.Double" calculation="Sum">
                    <measureExpression><![CDATA[$F{fee}]]></measureExpression>
                </measure>

                <!-- DETAIL CELL -->
                <crosstabCell width="100" height="20">
                    <cellContents>
                        <textField>
                            <reportElement x="0" y="0" width="100" height="20"/>
                            <textFieldExpression><![CDATA[$V{feeMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>

                <!-- COLUMN TOTAL CELL -->
                <crosstabCell width="100" height="20" columnTotalGroup="course">
                    <cellContents>
                        <textField>
                            <reportElement x="0" y="0" width="100" height="20"/>
                            <textFieldExpression><![CDATA[$V{feeMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>

                <!-- ROW TOTAL CELL -->
                <crosstabCell width="100" height="20" rowTotalGroup="studentName">
                    <cellContents>
                        <textField>
                            <reportElement x="0" y="0" width="100" height="20"/>
                            <textFieldExpression><![CDATA[$V{feeMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>

                <!-- GRAND TOTAL CELL -->
                <crosstabCell width="100" height="20"
                              rowTotalGroup="studentName"
                              columnTotalGroup="course">
                    <cellContents>
                        <textField>
                            <reportElement x="0" y="0" width="100" height="20"/>
                            <textFieldExpression><![CDATA[$V{feeMeasure}]]></textFieldExpression>
                        </textField>
                    </cellContents>
                </crosstabCell>

            </crosstab>

        </band>
    </summary>

</jasperReport>
